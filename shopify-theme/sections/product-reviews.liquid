{% comment %}
  Product Reviews Section
  Customer reviews and Q&A matching ProductReviews.tsx
{% endcomment %}

{% schema %}
{
  "name": "Product Reviews",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_reviews",
      "label": "Enable reviews",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_questions",
      "label": "Enable Q&A",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Product Reviews"
    }
  ]
}
{% endschema %}

{% if section.settings.enable_reviews %}
  <div class="mt-12 border-t border-gray-200 pt-8">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-black">Customer Reviews</h2>
      {% comment %} Rating summary would come from review app {% endcomment %}
      <div class="flex items-center space-x-2">
        <span class="text-3xl font-bold text-black">4.5</span>
        <div class="flex items-center">
          {% for i in (1..5) %}
            <svg class="w-5 h-5 {% if i <= 4 %}text-yellow-400 fill-current{% else %}text-gray-300{% endif %}" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
            </svg>
          {% endfor %}
        </div>
        <span class="text-gray-600">(24 reviews)</span>
      </div>
    </div>

    {% comment %} Tabs {% endcomment %}
    <div class="flex border-b border-gray-200 mb-6">
      <button
        class="tab-button px-4 py-2 font-medium text-black border-b-2 border-black"
        data-tab="reviews"
      >
        Reviews (24)
      </button>
      {% if section.settings.enable_questions %}
        <button
          class="tab-button px-4 py-2 font-medium text-gray-600 hover:text-black"
          data-tab="questions"
        >
          Q&A (5)
        </button>
      {% endif %}
    </div>

    {% comment %} Reviews Tab {% endcomment %}
    <div id="reviews-tab" class="tab-content">
      <div class="space-y-6">
        {% comment %} Reviews would be loaded from review app {% endcomment %}
        <div class="border-b border-gray-100 pb-6">
          <div class="flex items-start space-x-4">
            <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0">
              <span class="text-gray-600 font-semibold">JD</span>
            </div>
            <div class="flex-1">
              <div class="flex items-center space-x-2 mb-2">
                <span class="font-semibold text-black">John Doe</span>
                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                  Verified Purchase
                </span>
                <span class="text-sm text-gray-500">Jan 15, 2024</span>
              </div>
              <div class="flex items-center mb-2">
                {% for i in (1..5) %}
                  <svg class="w-4 h-4 {% if i <= 5 %}text-yellow-400 fill-current{% else %}text-gray-300{% endif %}" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                  </svg>
                {% endfor %}
              </div>
              <h4 class="font-semibold text-black mb-1">Great product!</h4>
              <p class="text-gray-700 mb-3">Really happy with this purchase. Quality is excellent.</p>
              <button class="text-sm text-gray-600 hover:text-black flex items-center space-x-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path>
                </svg>
                <span>Helpful (3)</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    {% comment %} Questions Tab {% endcomment %}
    {% if section.settings.enable_questions %}
      <div id="questions-tab" class="tab-content hidden">
        <div class="space-y-6">
          <div class="border-b border-gray-100 pb-6">
            <div class="mb-4">
              <div class="flex items-center space-x-2 mb-2">
                <span class="font-semibold text-black">Q: What's the minimum order quantity?</span>
                <span class="text-sm text-gray-500">John â€¢ Jan 10, 2024</span>
              </div>
              <div class="ml-6 mt-3 p-3 bg-gray-50 rounded">
                <div class="flex items-center space-x-2 mb-1">
                  <span class="font-semibold text-black">A:</span>
                  <span class="text-sm text-gray-700">OSP Team</span>
                  <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">
                    Vendor
                  </span>
                  <span class="text-sm text-gray-500">Jan 11, 2024</span>
                </div>
                <p class="text-gray-700">The minimum order quantity is 24 units.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          const targetTab = this.dataset.tab;
          
          // Update button states
          tabButtons.forEach(btn => {
            btn.classList.remove('text-black', 'border-b-2', 'border-black');
            btn.classList.add('text-gray-600');
          });
          this.classList.remove('text-gray-600');
          this.classList.add('text-black', 'border-b-2', 'border-black');
          
          // Update content visibility
          tabContents.forEach(content => {
            content.classList.add('hidden');
          });
          const targetContent = document.getElementById(targetTab + '-tab');
          if (targetContent) {
            targetContent.classList.remove('hidden');
          }
        });
      });
    });
  </script>
{% endif %}
