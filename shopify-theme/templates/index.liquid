<!-- /templates/index.liquid -->
{%- comment -%}
Redesigned homepage to mirror the /browse page experience from the Next app:
- Hero video call-to-action (section)
- Featured brands (using key collections as brand stand-ins)
- Quick filter pills linking to collections
- Featured product carousel (defaults to all products when no collection is set)
{%- endcomment -%}

{%- section 'hero-video' -%}

<div class="mt-12 mb-0 ml-4 md:ml-8 lg:ml-12 2xl:ml-20 lg:flex lg:flex-col">
  <div class="items-start flex flex-col">
    <h4 class="text-2xl font-serif text-[#333333] mb-6">
      Featured brands
    </h4>
    <div class="w-full flex justify-between items-center mb-6">
      <div class="overflow-auto flex-1">
        <div class="flex gap-2 overflow-x-auto scrollbar-hide pr-4">
          {%- assign featured_collection_handles = "beverages,equipment,tableware" | split: "," -%}
          {%- for handle in featured_collection_handles -%}
            {%- assign brand_collection = collections[handle] -%}
            {%- if brand_collection != blank -%}
              <div class="flex-shrink-0">
                <a
                  href="{{ brand_collection.url }}"
                  class="flex h-10 px-6 cursor-pointer items-center justify-center rounded-[40px] border text-sm font-sans transition-all border-gray-200 text-gray-600 hover:border-gray-400"
                >
                  {{ brand_collection.title }}
                </a>
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
      </div>
      <a
        class="hidden xl:block text-sm text-gray-700 hover:text-black transition-colors whitespace-nowrap ml-8 mr-12 lg:mr-20"
        href="/collections/all"
      >
        All brands
      </a>
    </div>

    <div class="w-full overflow-x-auto scrollbar-hide mb-12">
      <div class="flex gap-4 md:gap-6 pb-4">
        {%- for handle in featured_collection_handles -%}
          {%- assign brand_collection = collections[handle] -%}
          {%- if brand_collection != blank -%}
            <a
              href="{{ brand_collection.url }}"
              class="group flex-shrink-0 w-[200px] flex flex-col"
            >
              <div class="rounded-lg overflow-hidden aspect-square w-full relative mb-2 bg-gray-100">
                {%- if brand_collection.featured_image -%}
                  <img
                    src="{{ brand_collection.featured_image | img_url: '400x400' }}"
                    alt="{{ brand_collection.title | escape }}"
                    class="object-cover transition-transform duration-[1200ms] group-hover:scale-110 w-full h-full"
                    loading="lazy"
                  >
                {%- else -%}
                  <div class="w-full h-full flex items-center justify-center text-gray-400">
                    {{ brand_collection.title | truncate: 20 }}
                  </div>
                {%- endif -%}
              </div>
              <p class="font-sans font-medium text-[#333333] truncate group-hover:underline underline-offset-4 decoration-1 transition-all duration-300">
                {{ brand_collection.title }}
              </p>
              <p class="text-xs text-gray-600 truncate">
                {{ brand_collection.description | strip_html | truncate: 40 }}
              </p>
            </a>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>

<div class="mt-12 mb-0 flex">
  <div class="flex-1 px-4 md:px-8 lg:px-12 2xl:px-20 py-8">
    <h1 class="text-3xl font-serif text-[#333333] mb-8">
      Find the best wholesale organic sodas, equipment & sustainable tableware
    </h1>

    <div class="flex flex-wrap items-center gap-3 mb-8">
      <a href="/collections/all?filter=new" class="px-4 py-2 rounded-full text-sm font-medium border transition-colors bg-white text-gray-700 border-gray-300 hover:border-gray-400">
        New this month
      </a>
      <a href="/collections/all?filter=low-minimum" class="px-4 py-2 rounded-full text-sm font-medium border transition-colors bg-white text-gray-700 border-gray-300 hover:border-gray-400">
        Low minimum
      </a>
      <a href="/collections/all?filter=bestseller" class="px-4 py-2 rounded-full text-sm font-medium border transition-colors flex items-center bg-white text-gray-700 border-gray-300 hover:border-gray-400">
        <span class="text-green-500 mr-1">â˜…</span> Top Shop
      </a>
    </div>

    {%- comment -%} Featured products carousel (falls back to all products if no collection set) {%- endcomment -%}
    {% section 'featured-products-carousel' %}
  </div>
</div>
